<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Image Generator | Toolify</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --primary: #00d4ff;
  --secondary: #00ff99;
  --danger: #ff5e5e;
  --bg-gradient: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
}

body {
  margin: 0;
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  background: var(--bg-gradient);
  color: #fff;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  width: 100%;
  max-width: 600px;
  padding: 20px;
}

h1 {
  text-align: center;
  font-size: 2.3rem;
  margin-bottom: 20px;
}

.card {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.2);
}

textarea, select, button {
  width: 100%;
  padding: 14px;
  margin-top: 14px;
  border-radius: 12px;
  border: none;
  font-size: 15px;
}

textarea {
  background: rgba(0,0,0,0.25);
  color: #fff;
  resize: vertical;
  min-height: 80px;
}

select {
  background: rgba(255,255,255,0.15);
  color: #fff;
}

select option { background: #203a43; }

button {
  background: var(--primary);
  font-weight: bold;
  cursor: pointer;
  margin-top: 22px;
}

button.loading {
  background: var(--secondary);
  color: #000;
}

button:disabled {
  background: #555;
  cursor: not-allowed;
}

.loader {
  margin-top: 12px;
  color: var(--primary);
  text-align: center;
}

.error-box {
  margin-top: 15px;
  padding: 12px;
  border-radius: 10px;
  background: rgba(255,94,94,0.15);
  color: #ffb3b3;
  font-size: 14px;
  text-align: center;
}

#imageBox {
  text-align: center;
  margin-top: 20px;
}

#imageBox img {
  max-width: 100%;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.download-btn {
  display: inline-block;
  margin-top: 15px;
  padding: 12px 22px;
  background: var(--secondary);
  color: #000;
  border-radius: 10px;
  text-decoration: none;
  font-weight: bold;
}

.limit {
  text-align: center;
  font-size: 13px;
  margin-top: 10px;
  color: #bbb;
}

/* üì± Mobile */
@media (max-width: 600px) {
  h1 { font-size: 2rem; }
  .card { padding: 20px; }
}
</style>
</head>

<body>
<div class="container">
<h1>üß† AI Creator</h1>

<div class="card">
  <textarea id="prompt" placeholder="Describe the image you want to create..."></textarea>

  <select id="style">
    <option value="">No Style</option>
    <option value="anime style, high resolution">Anime</option>
    <option value="photorealistic, detailed">Realistic</option>
    <option value="cyberpunk, neon lighting">Cyberpunk</option>
    <option value="oil painting, artistic">Oil Painting</option>
  </select>

  <button id="generateBtn">Generate Art</button>

  <div class="loader" id="loader"></div>
  <div class="limit" id="limitText"></div>
  <div id="imageBox"></div>

  <a class="download-btn" href="index.html" style="display:block;text-align:center;margin-top:20px;background:none;color:#bbb;">‚Üê Back</a>
</div>
</div>

<script>
const WORKER_URL = "https://wispy-limit-562f.mohakchoubey.workers.dev";
const DAILY_LIMIT = 8;

const bannedWords = [
  "nude","sex","porn","xxx","boobs","breast",
  "erotic","adult","nsfw","naked","bikini"
];

const promptInput = document.getElementById("prompt");
const generateBtn = document.getElementById("generateBtn");
const loader = document.getElementById("loader");
const imageBox = document.getElementById("imageBox");
const limitText = document.getElementById("limitText");

function todayKey() {
  return "ai_" + new Date().toISOString().slice(0,10);
}
function getUsage() {
  return parseInt(localStorage.getItem(todayKey()) || "0");
}
function incUsage() {
  localStorage.setItem(todayKey(), getUsage() + 1);
}
function updateLimit() {
  limitText.innerText = `Daily Uses: ${getUsage()} / ${DAILY_LIMIT}`;
}

generateBtn.onclick = async () => {
  const prompt = promptInput.value.trim();
  imageBox.innerHTML = "";
  loader.innerText = "";

  if (!prompt) {
    imageBox.innerHTML = `<div class="error-box">Please enter a prompt ‚úçÔ∏è</div>`;
    return;
  }

  if (getUsage() >= DAILY_LIMIT) {
    imageBox.innerHTML = `<div class="error-box">Daily limit reached (8 images)</div>`;
    return;
  }

  if (bannedWords.some(w => prompt.toLowerCase().includes(w))) {
    imageBox.innerHTML = `<div class="error-box">NSFW content is not allowed üö´</div>`;
    return;
  }

  const style = document.getElementById("style").value;
  const finalPrompt = style ? `${prompt}, ${style}` : prompt;

  generateBtn.disabled = true;
  generateBtn.classList.add("loading");
  generateBtn.innerText = "Generating...";
  loader.innerText = "üé® AI is working...";

  try {
    const res = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: finalPrompt })
    });

    const data = await res.json();
    if (!res.ok) throw new Error(data.error);

    imageBox.innerHTML = `
      <img src="${data.image}">
      <br>
      <a class="download-btn" href="${data.image}" download="ai-image.png">‚¨á Download</a>
    `;

    incUsage();
    updateLimit();

  } catch (e) {
    imageBox.innerHTML = `<div class="error-box">${e.message}</div>`;
  } finally {
    generateBtn.disabled = false;
    generateBtn.classList.remove("loading");
    generateBtn.innerText = "Generate Art";
    loader.innerText = "";
  }
};

updateLimit();
</script>
</body>
</html>

