<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch | Toolify</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2ff;
            --bg: #0b0b0b;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
        }

        /* LIGHT MODE VARIABLES */
        .light-mode {
            --bg: #f5f5f7;
            --card-bg: #ffffff;
            --text: #1d1d1f;
            --border: rgba(0, 0, 0, 0.1);
            --primary: #0071e3;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; transition: background 0.4s, color 0.4s; }
        
        body { 
            background: var(--bg); 
            color: var(--text); 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
        }

        /* Top Navigation */
        nav {
            position: fixed; top: 20px; width: 90%;
            display: flex; justify-content: space-between; align-items: center;
        }

        .back-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Mode Toggle Button */
        .theme-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            color: var(--text);
            font-size: 0.9rem;
        }

        /* Stopwatch Container */
        .stopwatch-container {
            text-align: center;
            background: var(--card-bg);
            padding: 50px;
            border-radius: 40px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 450px;
        }

        /* Monospace font prevents numbers from "jumping" */
        .display {
            font-family: 'JetBrains+Mono', monospace;
            font-size: 4rem;
            font-weight: 500;
            margin-bottom: 30px;
            color: var(--primary);
        }

        .controls { display: flex; gap: 15px; justify-content: center; }

        .btn {
            padding: 12px 25px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            min-width: 100px;
        }

        .btn-start { background: var(--primary); color: white; }
        .btn-stop { background: #ff3b30; color: white; }
        .btn-reset { background: #8e8e93; color: white; }

        /* Laps section */
        .laps {
            margin-top: 30px;
            max-height: 150px;
            overflow-y: auto;
            border-top: 1px solid var(--border);
            padding-top: 15px;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        footer {
            position: fixed; bottom: 20px;
            font-size: 0.8rem; letter-spacing: 2px;
            color: #888;
        }

        .heart { color: #ff0000; }
    </style>
</head>
<body>

    <nav>
        <a href="index.html" class="back-link">‚Üê Go back to Toolbox Hub</a>
        <button class="theme-btn" onclick="toggleTheme()" id="theme-text">‚òÄÔ∏è Light Mode</button>
    </nav>

    <div class="stopwatch-container">
        <div class="display" id="display">00:00:00</div>
        <div class="controls">
            <button class="btn btn-start" id="startBtn" onclick="start()">Start</button>
            <button class="btn btn-reset" onclick="reset()">Reset</button>
            <button class="btn btn-start" style="background:#5856d6" onclick="lap()">Lap</button>
        </div>
        <div class="laps" id="lapsContainer"></div>
    </div>

    <footer>
        DEVELOPED WITH <span class="heart">‚ô•</span> BY MOHAK
    </footer>

    <script>
        let startTime;
        let elapsedTime = 0;
        let timerInterval;
        let isRunning = false;

        function timeToString(time) {
            let diffInHrs = time / 3600000;
            let hh = Math.floor(diffInHrs);

            let diffInMin = (diffInHrs - hh) * 60;
            let mm = Math.floor(diffInMin);

            let diffInSec = (diffInMin - mm) * 60;
            let ss = Math.floor(diffInSec);

            let diffInMs = (diffInSec - ss) * 100;
            let ms = Math.floor(diffInMs);

            let formattedMM = mm.toString().padStart(2, "0");
            let formattedSS = ss.toString().padStart(2, "0");
            let formattedMS = ms.toString().padStart(2, "0");

            return `${formattedMM}:${formattedSS}:${formattedMS}`;
        }

        function print(txt) {
            document.getElementById("display").innerHTML = txt;
        }

        function start() {
            if (!isRunning) {
                startTime = Date.now() - elapsedTime;
                timerInterval = setInterval(function printTime() {
                    elapsedTime = Date.now() - startTime;
                    print(timeToString(elapsedTime));
                }, 10);
                showButton("STOP");
                isRunning = true;
            } else {
                clearInterval(timerInterval);
                showButton("START");
                isRunning = false;
            }
        }

        function reset() {
            clearInterval(timerInterval);
            print("00:00:00");
            elapsedTime = 0;
            document.getElementById("lapsContainer").innerHTML = "";
            showButton("START");
            isRunning = false;
        }

        function lap() {
            if (isRunning) {
                let lapTime = timeToString(elapsedTime);
                let node = document.createElement("div");
                node.className = "lap-item";
                node.innerHTML = `<span>Lap ${document.querySelectorAll('.lap-item').length + 1}</span> <span>${lapTime}</span>`;
                document.getElementById("lapsContainer").prepend(node);
            }
        }

        function showButton(buttonKey) {
            const startBtn = document.getElementById("startBtn");
            if (buttonKey === "STOP") {
                startBtn.innerHTML = "Stop";
                startBtn.className = "btn btn-stop";
            } else {
                startBtn.innerHTML = "Start";
                startBtn.className = "btn btn-start";
            }
        }

        function toggleTheme() {
            const body = document.body;
            const btnText = document.getElementById("theme-text");
            body.classList.toggle("light-mode");
            
            if (body.classList.contains("light-mode")) {
                btnText.innerHTML = "üåô Dark Mode";
            } else {
                btnText.innerHTML = "‚òÄÔ∏è Light Mode";
            }
        }
    </script>
</body>
</html>
